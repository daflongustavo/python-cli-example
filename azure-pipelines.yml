trigger:
- main

variables:
- group: python-cli-example-lib

jobs:
# - job: PublishPackageLinux
#   pool:
#     vmImage: ubuntu-latest
#   steps:
#   - script: |
#       pip3 install pyinstaller
#       pip3 install click
#       pip3 install twine
#       python setup.py sdist
#       twine upload dist/* --username __token__ --password $(pip_api_key)
#     displayName: 'Publish Pypi Package (Linux)'

- job: InstallChocolatey
  pool:
    vmImage: 'windows-latest'
  steps:
  - powershell: |
      pip install pyinstaller
    displayName: 'Install PyInstaller'

  - script: |
      pyinstaller python-phrase.spec
      choco pack
      choco push python-phrase.1.0.0.nupkg -s https://chocolatey.org/ --api-key $(choco_api_key)
    displayName: 'Run PowerShell Commands (Windows)'
